<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Tracking - I'm Running Live</title>
    <meta name="description" content="Follow the runner's progress in real-time with live GPS tracking, stats, and supporter messages.">
    <link rel="stylesheet" href="/css/livemap.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🏃‍♂️</text></svg>">
</head>
<body>
<!-- Loading Screen -->
<div id="loadingScreen" class="loading-screen">
    <div class="loading-content">
        <div class="loading-spinner">🏃‍♂️</div>
        <h2>I'm Running Live</h2>
        <p>Connecting to runner...</p>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
    </div>
</div>

<!-- Fullscreen Map -->
<div id="map" class="fullscreen-map"></div>

<!-- Top Header Overlay -->
<header class="header-overlay">
    <div class="header-left">
        <a href="/" class="back-btn">← I'm Running Live</a>
        <h1 id="runnerTitle">🏃‍♂️ Yanir's Berlin Marathon</h1>
        <div class="live-indicator">
            <span class="live-dot"></span>
            <span class="live-text">LIVE NOW!</span>
        </div>
    </div>

    <div class="connection-status">
        <div class="status-indicator" id="connectionStatus">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Connecting...</span>
        </div>
    </div>
</header>

<!-- Stats Overlay -->
<div class="stats-overlay">
    <div class="stat-card primary">
        <div class="stat-value" id="currentTime">01:00:31</div>
        <div class="stat-label">RACE TIME</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" id="distance">20.9</div>
        <div class="stat-label">DISTANCE (KM)</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" id="pace">5:22</div>
        <div class="stat-label">PACE (/KM)</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" id="heartRate">175</div>
        <div class="stat-label">HEART RATE</div>
    </div>
    <div class="stat-card">
        <div class="stat-value" id="remaining">21.3</div>
        <div class="stat-label">REMAINING (KM)</div>
    </div>
</div>

<!-- Cheer Menu (Right Side) -->
<div class="cheer-menu" id="cheerMenu">
    <div class="cheer-tab" id="cheerTab">
        <span>Close</span>
        <div class="cheer-arrow">〈</div>
    </div>

    <div class="cheer-content">
        <h3>💪 Send Your Support!</h3>

        <!-- Name Input -->
        <div class="name-section">
            <div class="name-input-container">
                <input type="text" id="senderName" placeholder="Your name..." required maxlength="30">
                <button type="button" id="editNameBtn" class="edit-name-btn" title="Edit name">
                    ✏️
                </button>
            </div>
        </div>

        <!-- Canned Cheers -->
        <div class="canned-cheers">
            <button class="cheer-btn red" data-message="You've got this!">
                ❤️ You've got this!
            </button>
            <button class="cheer-btn yellow" data-message="Keep going!">
                ⚡ Keep going!
            </button>
            <button class="cheer-btn orange" data-message="Almost there!">
                🏆 Almost there!
            </button>
            <button class="cheer-btn orange-red" data-message="You're on fire!">
                🔥 You're on fire!
            </button>
            <button class="cheer-btn green" data-message="Go Go Go!">
                🚀 Go Go Go!
            </button>
            <button class="cheer-btn blue" data-message="Soccer wave celebration!">
                ⚽ Soccer wave!
            </button>
            <button class="cheer-btn purple" data-message="Clapping for you!">
                👏 Clapping!
            </button>
        </div>

        <!-- Message Status -->
        <div class="message-status" id="messageStatus"></div>

        <!-- Recent Messages -->
        <div class="recent-messages">
            <h4>Recent Cheers <span class="message-count" id="messageCount">(0)</span></h4>
            <div class="messages-list" id="messagesList">
                <div class="loading-messages">Loading messages...</div>
            </div>
        </div>
    </div>
</div>

<!-- Map Controls -->
<div class="map-controls-overlay">
    <button class="map-btn" id="centerMapBtn" title="Center on Runner">
        🎯
    </button>
</div>

<!-- Socket.IO Client -->
<script src="/socket.io/socket.io.js"></script>
<!-- Leaflet JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
<script src="/js/livemap.js"></script>
</body>
</html>
